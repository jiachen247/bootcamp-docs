# 3.1.1: Express.js + JSON

We are going to take the basic Express.js example and combine it with the basic JSON file example.

#### Express.js

```javascript
import express from 'express';
const app = express();

const PORT = 3000;

const whenIncomingRequest = (request, response) => {

  console.log('request came in');

  response.send('yay');
};

app.get('/', whenIncomingRequest);

app.listen(PORT);
```

#### jsonFileStorage.js

```javascript
import { read } from './jsonFileStorage.js'

// ...

if( process.argv[2] === 'read' ) {

  add('data.json', (data)=>{
    console.log( 'done', data );
  });
}
```

#### Express.js + JSON

```javascript
import express from 'express';
import { read } from './jsonFileModule.js';

const app = express();

const PORT = 3004;

const whenIncomingRequest = (request, response) => {
  
  console.log('request came in');

  // read the JSON file
  read('data.json', (data) => {
    
    // send back data in the response
    console.log('done with reading');
    response.send(data);
  });
};

app.get('/', whenIncomingRequest);

app.listen(PORT);
```

Here, the nesting, or chronological order of the callbacks is very important. We listen for the request with `whenIncomingRequest`, then wait for the JSON file `read` to also complete **before** we send the response back.



