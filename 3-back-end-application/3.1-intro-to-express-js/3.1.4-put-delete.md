# 3.1.4: PUT/DELETE

#### PUT

The next thing to add to add to our app is the ability to edit the data that's already there.

There are two specific HTTP methods for this, PUT and DELETE. DELETE is straightforward, PUT signifies a request to edit something.

The route for PUT is distinct because we have added the `index` request parameter. -This follows because if we want to edit something, we need to specify in the request _which_ thing to edit.

```javascript
app.put('/recipe/:index', function (req, res) {
  res.send('Got a PUT request at /user')
});
```

When we receive the request we will simply replace all of the data that's currently saved for that recipe and replace it with what's in the request.

### Method Override

[https://dev.to/moz5691/method-override-for-put-and-delete-in-html-3fp2](https://dev.to/moz5691/method-override-for-put-and-delete-in-html-3fp2#:~:text=Browsers%20do%20support%20PUT%20and,supported%20by%20'HTML%20form'.)

[http://expressjs.com/en/resources/middleware/method-override.html](http://expressjs.com/en/resources/middleware/method-override.html)

```javascript
npm install method-override
```

```javascript
import methodOverride from 'method-override';

// override with POST having ?_method=DELETE
app.use(methodOverride('_method'))

```

### PUT Form

After making the route work, one specific optimization we need to make to the system is to, before the user submits new information, show them the old / current data.

This means we need to render a form that already has the current info in it.

```javascript
app.get('/recipe/:index/edit', (request, response) => {
  console.log('request came in');

  // read the JSON file
  read('data.json', (data) => {
  
    console.log('done with reading');
    
    // get the index param
    const { index } = request.params;
    
    // get out the recipe
    const recipe = data.recipes[index];
    recipe.index = index;
    const data = { recipe };
    
    // render the form, pass in the recipe
    response.render('edit', recipe);
  });
});;
```

#### edit.ejs

```markup
<html>
  <body>
    <form action="/recipe<%= recipe.index %>" method="POST">
        <input type="hidden" name="_method" value="PUT">
        <label for="label">recipe label:</label><br>
        <input type="text" id="label" name="label" value="<%= recipe.label %>"><br>
        <label for="ingredients">ingredients:</label><br>
        <input type="text" id="ingredients" name="ingredients" value="<%= recipe.ingredients %>"><br>
        <input type="submit" value="Submit">
    </form> 
  </body>
</html>
```

#### DELETE

```javascript
app.delete('/recipe/:index', function (req, res) {
  res.send('Got a DELETE request at /user')
});
```

#### DELETE Form

#### delete.ejs

```markup
<html>
  <body>
    <form action="/recipe<%= recipe.index %>" method="DELETE">
        <input type="hidden" name="_method" value="DELETE">
        <input type="submit" value="Submit">
    </form> 
  </body>
</html>
```



