# 3.ICE.9: Multiple Foreign Keys

## Introduction

Create a command-line app for an art museum. The museum has paintings that are grouped by collection. Curators determine which paintings belong to which collections. Collections can be defined by schools, art movements, years, or donors. A painting is credited to a single artist.

This ICE practises "multiple foreign keys" in the sense that paintings are associated with both artists and collections. Paintings and artists are associated via a one-to-many relationship, and paintings and collections are associated via a many-to-many relationship.

## Base

### DB Setup

1. Create a new database called `museum`. 
2. Create 3 tables: `artists`, `collections` and `paintings`. Record the `CREATE TABLE` statements in a file `init_tables.sql` for debugging purposes. 

### App Setup

1. Begin with the [base node repo.](https://github.com/rocketacademy/base-node-swe1)
2. Install the `pg` library with NPM.
3. Use the code from [3.5.2: PostgreSQL Node App](../3.5-sql-applications/3.5.2-postgresql-node-app.md#select) as a template for `index.js`. Remember to update `pgConnectionConfigs` to reference the new DB name.

### Insert Seed Data

The museum is mounting 2 shows, 1 on the [New York School](https://www.wikiart.org/en/artists-by-painting-school/new-york-school) and 1 on [Cubism](https://www.wikiart.org/en/artists-by-art-movement/cubism). Use the links to populate the database by writing `INSERT` queries for each table.

### Get Artists in the Collection

#### Command Template

```text
node index.js get-artists <COLLECTION_NAME>
```

#### Sample Command

This command assumes you've named the Cubism collection "The Cubism Show" in the database.

```
node index.js get-artists 'The Cubism Show'
```

```
1. Picasso
2. Max Weber
3. Georges Braque
```

### Create a Painting and Put It in a Collection

#### Command Template

```text
node index.js new-painting <PAINTING_NAME> <ARTIST_ID> <COLLECTION_ID>
```

#### Sample Command

This command assumes "Henri Matisse" has artist ID 2 and the collection you intend to place the painting in has ID 3.

```
node index.js new-painting 'Marguerite' 2 3
```

## Comfortable

### Create a New Collection and Move Paintings into It

The museum is mounting a new show. Put paintings that the museum already has into the new collection.

#### Command Template

```text
node index.js new-collection <COLLECTION_NAME> <PAINTING_ID> <PAINTING_ID> ...
```

#### Sample Command

This command assumes that paintings 'Girls of Avignon' and 'Marguerite' already exist in the DB with IDs 1 and 2 respectively.

```
node index.js new-collection 'Paris in 1907' 1 2
```

## More Comfortable

### Create a Painting and Put It in a Collection \(with Artist and Collection Names\)

#### Command Template

```text
node index.js new-painting <PAINTING_NAME> <ARTIST_NAME> <COLLECTION_NAME>
```

#### Sample Command

This command assumes "Mark Rothko" and "The New York School" are an existing artist and collection respectively in the DB.

```
node index.js new-painting 'Yellow, Cherry, Orange' 'Mark Rothko' 'The New York School'
```

