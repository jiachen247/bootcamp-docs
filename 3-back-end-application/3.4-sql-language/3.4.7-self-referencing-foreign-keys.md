# 3.4.7: Self-Referencing Foreign Keys

## Introduction

Another common foreign key relationship pattern is where a row in a table references another row in the same table.

## Create Tables

Create `users`, `messages. users` will join on itself to properly get all the data.

```sql
CREATE TABLE users ( id SERIAL PRIMARY KEY, name TEXT );
CREATE TABLE messages ( id SERIAL PRIMARY KEY, message TEXT, sender_id INTEGER, recipient_id INTEGER );
```

## Create Users

Insert records to the `users` table.

```sql
INSERT INTO recipes ( name ) VALUES ('Susan Chan');
INSERT INTO recipes ( name ) VALUES ('Albert');
INSERT INTO recipes ( name ) VALUES ('Kai');
```

## Messages are between users \(between user table rows\)

Susan sends a message to Albert. Susan is the sender and Albert is the recipient.

```sql
INSERT INTO messages ( message, sender_id, recipient_id ) VALUES (1, 2, 'meeting later??');
```

## Get Sent Messages



