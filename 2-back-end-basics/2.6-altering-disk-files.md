# 2.6: Altering Disk Files

In order to write a complete program that _**processes**_ a file, we need both file read and write.

First, we'll read the file into our program, then write the final version back out.

```javascript
// get the node libraries
import { readFile, writeFile } from 'fs';

// set the name of the file we are working with
const filename = 'alter.txt';

// make a function that takes a large string and breaks it apart into lines
const addToText = (text) => {
  const lines = text.split('\n');

  let newContent = '';

  for (let i = 0; i < lines.length; i += 1) {
    newContent += lines[i];
    newContent += Math.random();
    newContent += '\n';
  }

  return newContent;
};

// set the file read callback
const whenFileIsRead = (error, content) => {
  console.log(content);

  //Â check for reading errors
  if (error) {
    console.log('reading error', error);
  }

  // call the text processing function
  const newContent = addToText(content);

  // with the new content we got from
  // the function write out the result
  writeFile(filename, newContent, (err) => {
    //
    if (err) {
      console.log('error writing', newContent, err);
    } else {
      // file written successfully
      console.log('success!');
    }
  });
};

// read the file
readFile(filename, 'utf-8', whenFileIsRead);
```
