# 2.ICE.5: JSON Cards

Create a game of cards that lives permanently on the computer.

### Base

Begin with [the base starter code.](https://github.com/rocketacademy/base-node-swe1)

Copy [the deck array from SWE101](https://swe101.rocketacademy.co/10-javascript-objects/10.1-objects#deck) into your `index.js`.

We'll use the [`jsonFileStorage` module from 2.13.2](../2.13.1-json/2.13.2-json-module.md).

```text
node index.js shuffle
```

Shuffle the deck and then use the `add` function of the module to record it permanently in the JSON file.

```text
node index.js deal
```

Read from the deck by calling the `read` function.

### Outside the Module

The `read` function can't truly deal two cards, because it can only `console.log`. We can't leave the module intact and `read` or `pop` 2 cards from the deck, or even format the output in any way, e.g. "Queen of Spades".

We'll use read and write together and write our own card logic.

Begin the game by using [this data.json file](https://raw.githubusercontent.com/rocketacademy/swe1-docs/master/2-back-end-basics/2.13.1-json/data.json) of an unshuffled deck, and one key for the hand.

Whenever we need to change something in data.json, create a new function for it based on the `banana` function below. Write the needed logic to change the json data starting on line 11.

```javascript
const banana = (filename) => {
  // set the file read callback
  const whenFileIsRead = (error, jsonContent) => {
    // check for reading errors
    if (error) {
      console.log('reading error', error);
    }
    
    console.log( jsonContent );
    
    // here is where any changes to the JSON fle go
    
    const stringContent = JSON.stringify(jsonContent);
  
    // set the file read callback
    const whenFileIsWritten = (error, jsonContent) => {
      // check for reading errors
      if (error) {
        console.log('writing error', error);
      }
      
      console.log( jsonContent );
    };
  
    // read the file
    writeFile(filename, stringContent, whenFileIsWritten);
  };

  // read the file
  readFile(filename, 'utf-8', whenFileIsRead);
};
```

#### Shuffle

Shuffle the cards:

```text
node index.js shuffle
```

This command should get the current value of the card deck and write out the shuffled version.

Open the `data.json` file to confirm that the cards in the deck have been shuffled.

#### Deal

```text
node index.js deal
```

Take 2 cards _out of the deck_ and put them in the `currentHand` key of `data.json`. 

Print out the cards.

Open the `data.json` file to confirm that the top two cards have been taken out of the deck and put into the hand.

#### High Card

```text
node index.js play
```

Deal two cards out of the deck and compare them to the player's cards.

```text
Computer got: 2 of spades and 4 of spades.
You have: 9 of hearts and 9 of diamonds.
You win!
```

### Comfortable

Incorporate blackjack logic into the game. Evaluate the cards based on the rules of blackjack. \(Without the logic of adding cards to the hand\). You can reuse logic from previous code.

### More Comfortable

Implement the rest of a blackjack game \(in this order\):

* Allow the player to hit
* Implement the dealer behavior. This shouldn't need a separate key in data.json.
* Implement splits

 



