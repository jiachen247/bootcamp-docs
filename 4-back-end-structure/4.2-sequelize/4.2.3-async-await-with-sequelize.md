# 4.2.3: Async/Await With Sequelize

## Introduction

Async/await is a powerful tool to simplify our code, especially when performing DB queries with Sequelize. The following code builds on the migration and model setup from [Module 4.2.2: Sequelize One-to-Many Relationships](4.2.2-sequelize-one-to-many-relationships.md).

## Query Related Tables Using Async/Await

The following examples demonstrate how to use async/await with Sequelize. Note that the query code has to:

1. Be inside a function we declare as `async`
2. Be surrounded inside the `async` function with a `try`/`catch` block.

### Get Items from Category

#### index.mjs

```javascript
import db from './models/index.mjs';

const getData = async () => {
  try {
    const category = await db.Category.findOne({
      where: {
        name: [process.argv[2]],
      },
    });

    const categoryItems = await category.getItems();

    console.log(categoryItems);
  } catch (error) {
    console.log(error);
  }
};

getData();
```

#### Sample Command

```javascript
node index.mjs fruit
```

#### Sample Output

```text
banana
apple
```

### Get Category of Item

#### index.mjs

```javascript
import db from './models/index.mjs';
const getData = async () => {
  try {
    const item = await db.Item.findOne({
      where: {
        name: [process.argv[2]],
      },
    });

    const itemCategory = await item.getCategory();

    console.log(itemCategory);
  } catch (error) {
    console.log(error);
  }
};

getData();
```

#### Sample Command

```javascript
node index.mjs banana
```

#### Sample Output

```text
fruit
```
