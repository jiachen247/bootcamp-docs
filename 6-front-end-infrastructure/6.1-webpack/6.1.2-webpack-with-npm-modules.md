# 6.1.2: Webpack with NPM Modules

## Introduction

[Module 6.1.1: Webpack with Local Modules](6.1.1-webpack-with-local-modules.md) shared how Webpack can compile local modules into a distribution file. Here we will see how Webpack compiles 3rd-party NPM modules.

## Webpack Import with NPM Modules Order of Events

Webpack will transform the source JS file and all dependencies specified in import statements into a single distribution file.

![](../../.gitbook/assets/webpack-copy-2.jpg)

1. `npm install` is run on the command line. The package files are stored in the `node_modules` directory.
2. The `webpack` command is run on the command line.
3. Webpack reads an `import` statement in the source `script.js` file.
4. Based on the `import`, Webpack retrieves all dependency code. If the imported module depends on other modules, Webpack retrieves those modules too.
5. Webpack writes the compiled file into the `dist` directory.
6. The server is started with `node index.js`. A request is made to the server. The server responds with the compiled JS file in `dist`.

## Webpack Import with NPM Modules Example

Create a directory and install Webpack

```text
mkdir npm-demo
cd npm-demo
npm init -y
npm install --save-dev webpack webpack-cli
```

Create some files to work with:

```text
mkdir src dist
touch src/script.js
touch dist/index.html
```

#### src/script.js

```javascript
const component = () => {
  // make a container
  const div = document.createElement('div');

  // display element
  const span = document.createElement('span');

  // input
  const input = document.createElement('input');

  // on change, display in the span
  input.addEventListener('change', function () {
    span.innerText = input.value;
  });

  div.appendChild(input);
  div.appendChild(span);

  return div;
};

document.body.appendChild(component());
```

#### dist/index.html

```markup
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Getting Started</title>
  </head>
  <body>
    <script src="script.js"></script>
  </body>
</html>
```

### Webpack configuration:

#### webpack.config.js

```javascript
const path = require('path');

module.exports = {
  entry: './src/script.js',
  output: {
    filename: 'script.js',
    path: path.resolve(__dirname, 'dist'),
  },
};
```

## Install a Front-end Package

```text
npm install cat-names
```

Import the package in the source file and use it:

#### src/script.js

```javascript
import catNames from 'cat-names';

const component = () => {
  // make a container
  const div = document.createElement('div');

  // display element
  const span = document.createElement('span');

  // input
  const input = document.createElement('input');

  // on change, display in the span
  input.addEventListener('change', function () {
    // use cat names package
    span.innerText = input.value + ' : ' + catNames.random();
  });

  div.appendChild(input);
  div.appendChild(span);

  return div;
};

document.body.appendChild(component());
```

Run Webpack

```text
npx webpack --mode=production
```

### `dist/script.js`

Look in the generated script file. The imported JavaScript will be in this single file, as well as all of this package's dependencies.

To see a formatted version of this output file, install the [Beautify plugin for VSCode.](https://marketplace.visualstudio.com/items?itemName=HookyQR.beautify)

You can't install just any package. Try to install `pg` and `import` it into your `script.js` file.

